<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>So2sdr : Windows</title>
        <meta name="description" content="Amateur Radio contest logging with software-defined radio features">

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="http://n4ogw.github.io/so2sdr/css/syntax.css">
        <link rel="stylesheet" href="http://n4ogw.github.io/so2sdr/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <h4><a class="brand" href="http://n4ogw.github.io/so2sdr/">So2sdr</a>
    <small>Amateur Radio contest logging with software-defined radio features</small>
</h4>

                </div>
            </div>

            <div class="row">
                
                
                    <div id="navigation" class="col-sm-2">
                        <ul class="nav nav-list">
    <li><a href="http://n4ogw.github.io/so2sdr/">Home</a></li>
    
        
        

        
    
        
        

        
            
                <li class="nav-header">Changes</li>
            
            <li data-order="2"><a href="http://n4ogw.github.io/so2sdr/changes/issues.html">Issues</a></li>
        
            
            <li data-order="1"><a href="http://n4ogw.github.io/so2sdr/changes/changelog.html">Changelog</a></li>
        
    
        
        

        
            
                <li class="nav-header">Install</li>
            
            <li data-order="2"><a href="http://n4ogw.github.io/so2sdr/install/windows.html">Windows</a></li>
        
            
            <li data-order="1"><a href="http://n4ogw.github.io/so2sdr/install/linux-installation.html">Linux</a></li>
        
    
        
        

        
            
                <li class="nav-header">Documentation</li>
            
            <li data-order="3"><a href="http://n4ogw.github.io/so2sdr/doc/bandmap-tech-info.html">Bandmap tech info</a></li>
        
            
            <li data-order="2"><a href="http://n4ogw.github.io/so2sdr/doc/reference.html">Reference</a></li>
        
            
            <li data-order="1"><a href="http://n4ogw.github.io/so2sdr/doc/setup.html">Setup</a></li>
        
    
        
        

        
            
                <li class="nav-header">Support</li>
            
            <li data-order=""><a href="http://n4ogw.github.io/so2sdr/support/support.html">Contacts</a></li>
        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class="divider"></li> first to break up the content. -->
</ul>

                    </div>

                    <div id="content" class="col-sm-10">
                        <div class="page-header">
    <h2>Windows
        
    </h2>
</div>

<h3 id="toc_0">Windows install</h3>

<p>Windows installer packages (32 bit). So2sdr contains the
logging program and SDR bandmap, so2sdr-bandmap only the SDR bandmap
(for use standalone or with other logging programs):</p>

<ol>
<li><a href="../downloads/so2sdr-2.0.2.exe">so2sdr-2.0.2.exe</a></li>
<li><a href="../downloads/so2sdr-bandmap-2.0.2.exe">so2sdr-bandmap-2.0.2.exe</a></li>
</ol>

<p>Just run the install package. To remove, run &quot;uninstall&quot; in the
installation directory, or delete the install directory.
The program does not make any registry
changes.</p>

<h3 id="toc_1">Issues</h3>

<p>The GNU mingw compiler has some issues building for Windows. While the
program is linked as &quot;static&quot;, it still depends on several MS Windows
DLL&#39;s, including msvcrt.dll. This DLL changes with the version of
Windows. In some cases the program may not run on older versions of
Windows (XP) because it is missing some dependency in msvcrt.dll.</p>

<h3 id="toc_2">Cross-building so2sdr for Windows under Linux</h3>

<p>This uses the cross-build tool mxe  <a href="http://mxe.cc">MXE</a>. The default
compiler target for MXE is 32-bit, static linkage. It may be possible
to build shared and 64-bit versions, but I have not tested this.</p>

<ol>
<li><p>install mxe</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">git clone https://github.com/mxe/mxe.git
</code></pre></div></li>
<li><p>Install needed packages for mxe. In mxe directory (in my case /usr/local/src/mxe)</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">make qt
make portaudio
make fftw
make libltdl
make nsis
</code></pre></div></li>
<li><p>Set the path to pick up the MXE tools:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">export PATH=/usr/local/src/mxe/usr/bin:$PATH
</code></pre></div></li>
<li><p>build hamlib. The hamlib version from sourceforge is old and does not build correctly with mxe. The hamlib git version seemed to work. In the mxe directory:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">git clone https://github.com/N0NB/hamlib.git
cd hamlib
sh ./autogen.sh
./configure --host=i686-w64-mingw32.static --enable-static --disable-shared --prefix=/usr/local/src/mxe/usr/i686-w64-mingw32.static
make
make install
</code></pre></div></li>
<li><p>some small fixes are needed:</p>

<ul>
<li><p>in mxe/usr/i686-w64-mingw32.static/lib</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">ln -s libws2_32.a libWs2_32.a
</code></pre></div></li>
<li><p>qextserialport uses a private Qt header (bad practice!). It is missing
from the installed MXE Qt files and has to be added.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd /usr/local/src/mxe/usr/i686-w64-mingw32.static/qt/include/QtCore
mkdir private
cp /usr/include/qt4/QtCore/private/qwineventnotifier_p.h private/.
</code></pre></div></li>
<li><p>the current Portaudio does not work correctly with WDMKS when compiled
with Mingw; when run an error box will pop up. It seems ok to just dismiss
this box and not use the WDMKS driver. Alternatively, remove &#39;wdmks&#39; in the
MXE config script for Portaudio in src/portaudio.mk in the MXE install
directory.</p></li>
</ul></li>
<li><p>build so2sdr</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">git clone https://github.com/n4ogw/so2sdr.git
cd so2sdr/so2sdr
</code></pre></div>
<p>Note: there are some separate .ui files for Windows. These make
the fonts more readable:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cp so2sdr.ui.win so2sdr.ui
cp dupesheet.ui.win dupesheet.ui
i686-w64-mingw32.static-qmake-qt4
make
</code></pre></div>
<p>Afterwards so2sdr.exe should be in /release</p></li>
<li><p>Compress the exe file. With static linkage the exe file is (24 MB). upx can be used to reduce its size to about 30% of original (UPX version 3.91). If this step is skipped, NSIS also applies some compression to the executable.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">upx --best release/so2sdr.exe
</code></pre></div></li>
<li><p>Make Windows installer package:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd ..
i686-w64-mingw32.static/bin/makensis -X&quot;SetCompressor /FINAL lzma&quot; so2sdr-2.0.0
</code></pre></div>
<p>This is a very basic NSIS installer. To uninstall, run the &quot;uninstall&quot; in the directory so2sdr is installed into. Nothing in the registry is modified. There is also a separate NSIS script for making an install package with just the so2sdr-bandmap program.</p></li>
</ol>


                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    Documentation for <a href="https://github.com/n4ogw/so2sdr">So2sdr</a>

                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>

        
    </body>
</html>
